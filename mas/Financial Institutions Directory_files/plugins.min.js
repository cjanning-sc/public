"use strict";var MAS=MAS||{};MAS.UIComponents=function(t){function e(t,e,n,i,o,a,r){var l="";return""!=t&&(l=l+"&term="+encodeURIComponent(t)),""!=e&&(l=l+"&sector="+encodeURIComponent(e)),""!=n&&(l=l+"&category="+encodeURIComponent(n)),""!=i&&(l=l+"&activity="+encodeURIComponent(i)),""!=o&&(l=l+"&subactivity="+encodeURIComponent(o)),""!=a&&"1"!=a&&(l=l+"&page="+encodeURIComponent(a)),""!=r&&"10"!=r&&(l=l+"&count="+encodeURIComponent(r)),""!=l&&(l=l.replace("&","?")),l}var n=$.extend({debugState:!1,tablet:!1,mobile:!1},t||{});$(window).width()<=1024&&(n.tablet=!0),$(window).width()<=480&&(n.mobile=!0),$.fn.textLimiter=function(t){var e=$.extend({selector:this,textLength:100},t||{}),n=$(e.selector).text();return(n=n.trim()).length>e.textLength&&$(e.selector).text(n.substring(0,t.textLength)+"..."),this},$.fn.smartResize=function(t){return t?this.bind("resize",g(t)):this.trigger(smartResize)},this.init=function(){a(),r(),l(),s(),c(),d(),p(),u(),v(),b(),m(),w(),o(),x(),y(),C(),k()};var i=function(t){n.debugState&&console.log(t)},o=function(){if(document.referrer){var t=document.referrer.match(/:\/\/(.[^/]+)/)[1],e=document.location.origin.match(/:\/\/(.[^/]+)/)[1];t.indexOf(e)<0?$(".navigation .back").hide():$(".navigation .back").show()}else $(".navigation .back").hide()},a=function(){if($(".category-list").length){var t=function(t){n.hasClass("slick-initialized")||n.removeClass("deactive").slick({speed:300,slidesToShow:4,centerMode:!1,slidesToScroll:1,variableWidth:!0,infinite:t,prevArrow:'<a href="#" class="arrow-left">Prev</a>',nextArrow:'<a href="#" class="arrow-right">Next</a>',responsive:[{breakpoint:767,settings:{slidesToShow:1,slidesToScroll:1}}]})},e=function(e,i,o){e?(n.slick("unslick").removeClass("increased-font"),t(!1)):i?n.slick("unslick").addClass("deactive"):o&&n.addClass("increased-font")},n=$(".category-list"),i=4,o=4==i,a=i>4,r=i<4;n.find(".category-item").length<=2?n.addClass("deactive"):t(!1),$(".tools .rvfs-decrease").on("click",function(t){t.preventDefault(),i>1&&i--,e(o=4==i,r=i<4,a=i>4)}),$(".tools .rvfs-increase").on("click",function(){i<7&&i++,e(o=4==i,r=i<4,a=i>4)})}},r=function(){if($(".input-wrap").length){var t=$(".input-wrap"),e=t.find('input[type="text"]'),n=t.find(".dropdown-wrap");$("body").on("click",function(t){e.is(t.target)||0!==e.has(t.target).length||n.removeClass("opened")})}},l=function(){if($(".category-list").length){var t=$(".category-section"),e=t.find(".category-list"),n=t.find(".sub-category-list");e.find(".category-item a").on("click",function(t){t.preventDefault(),t.stopPropagation();var i=$(this);e.find(".active").removeClass("active"),i.parent().addClass("active"),n.html(i.next().html()),$(".tooltip").remove(),c(),x()})}},s=function(){0!==$(".resize").length&&$.rvFontsize({targetSection:".resize",store:!1,controllers:{}})},c=function(){if($('[data-toggle="tooltip"]').length){var t=$('[data-toggle="tooltip"]');t.tooltip({html:!0,trigger:"manual",placement:"top",constraints:[{to:"scrollParent",pin:!0}]}),t.off("click"),t.on("click",function(e){return e.stopPropagation(),e.preventDefault(),void 0===$(this).attr("aria-describedby")?(t.not(this).tooltip("hide"),$(this).tooltip("show")):$(this).tooltip("hide"),!1}),$("body").on("click",function(e){t.is(e.target)||0!==t.has(e.target).length||t.tooltip("hide")})}},d=function(){if($(".bottom-header nav").length){var t=$(".bottom-header"),e=t.find("nav"),o=t.find(".mobile-trigger");n.mobile?(i("initMobile"),e.find(".menu").unbind(),$(".utility").prependTo(e),e.find(".menu").on("click",function(){var t=$(this);i("has class opened ? "+t.hasClass("opened")),t.hasClass("opened")?t.removeClass("opened"):(e.find(".opened").removeClass("opened"),t.addClass("opened"))}),$("body").on("click",function(t){e.is(t.target)||0!==e.has(t.target).length||e.find(".opened").removeClass("opened")})):function(){i("initDesktop"),$(".utility").insertAfter($(".mobile-trigger"));var t=void 0;e.find(".menu").unbind(),e.find(".menu").hover(function(){(t=$(this)).addClass("opened")},function(){(t=$(this)).removeClass("opened")})}(),o.is(":visible")&&(i("MobileTrigger"),o.unbind(),o.on("click",function(){$(this).toggleClass("opened"),e.toggleClass("opened"),$("main").toggleClass("layered")}),$("body").on("click",function(t){e.is(t.target)||0!==e.has(t.target).length||o.is(t.target)||0!==o.has(t.target).length||(o.removeClass("opened"),e.removeClass("opened"),$("main").removeClass("layered"))}))}},p=function(){$(".inner-2").addClass("show"),$(".toggle").length&&$(".toggle").click(function(t){t.preventDefault();var e=$(this);e.next().hasClass("show")?e.next().removeClass("show").slideUp(350):(e.next().find(".inner-2").removeClass("show"),e.next().toggleClass("show").slideToggle(350))}),$(".expand").length&&($(".branch-inner").hide(),$(".expand").click(function(t){t.preventDefault();var e=$(this);e.next().hasClass("show")?(e.find("show").removeClass("show"),e.next().find("rotate").removeClass("rotate"),e.next().slideUp(350).removeClass("show"),e.find(".expand-btn").text("+").toggleClass("rotate")):(e.next().parent().find(".expand-btn").removeClass("rotate"),e.next().parent().find(".branch-inner").slideUp(350).removeClass("show"),e.next().toggleClass("show").slideToggle(350),e.next().parent().find(".expand-btn").text("+"),e.find(".expand-btn").text("â€“").toggleClass("rotate"))}),$(".selected").trigger("click"))},u=function(){n.mobile?f():h()},h=function(){$(".current").length||$(".selection").hide(),$('button.remove:not([style*="display: none"])').length&&$("button.remove").click(function(){$(this).parent().parent().find('p:not([style*="display: none"])').length>1?$(this).parent().fadeOut("slow",function(){$(this).css({display:"none"})}):($(this).parent().fadeOut("slow",function(){$(this).css({display:"none"})}),$(".current").fadeOut("fast"),$(".filter-options").fadeIn())}),$('button.remove-all-btn:not([style*="display: none"])').length&&$("button.remove-all-btn").click(function(){$(".current").fadeOut("fast"),$(".filter-options").fadeIn()})},f=function(){$(".filter-result .selection").length&&$(".filter-result .selection").click(function(){$(this).next().slideToggle(350),$(".dropdown").toggleClass("rotate")}),$(".current").prependTo(".filter-options"),$('button.remove:not([style*="display: none"])').length&&$("button.remove").click(function(){$(this).parent().parent().find('p:not([style*="display: none"])').length>1?$(this).parent().fadeOut("slow",function(){$(this).css({display:"none"})}):($(this).parent().fadeOut("slow",function(){$(this).css({display:"none"})}),$(".current").fadeOut("fast"),$(".filter-options").find(".inner").fadeIn())}),$('button.remove-all-btn:not([style*="display: none"])').length&&$("button.remove-all-btn").click(function(){$(".current").fadeOut("fast"),$(".inner").fadeIn()})},v=function(){$(window).smartResize(function(){$(window).width()<=1024?n.tablet=!0:n.tablet=!1,$(window).width()<=767?n.mobile=!0:n.mobile=!1,d(),a()})},g=function(t,e,n){var i=void 0;return function(){var o=this,a=arguments;i?clearTimeout(i):n&&t.apply(o,a),i=setTimeout(function(){n||t.apply(o,a),i=null},e||150)}},b=function(){var t=$("#divResultContent");if(t.length){var n=function(t,e){var n="dimension1";"category"==t?n="dimension2":"activity"==t?n="dimension3":"subactivity"==t&&(n="dimension4"),e&&(ga("set",n,e),ga("send","event",{eventCategory:t,eventAction:"click",eventLabel:e}),ga("send","pageview")),ga("set",{dimension1:null,dimension2:null,dimension3:null,dimension4:null})},i=t.children("div.box-wrapper").attr("data-path"),o=t.children("div.box-wrapper").attr("data-print"),a=t.children("div.box-wrapper").attr("data-term"),r=t.children("div.box-wrapper").attr("data-sector"),l=t.children("div.box-wrapper").attr("data-category"),d=t.children("div.box-wrapper").attr("data-activity"),p=t.children("div.box-wrapper").attr("data-subactivity"),h=Number(t.children("div.box-wrapper").attr("data-page")),f=t.children("div.box-wrapper").attr("data-total"),v=t.children("div.box-wrapper").attr("data-hit"),g=t.children("div.box-wrapper").attr("data-count"),b=t.children("div.box-wrapper").attr("data-url");window.history.replaceState(null,"Result",b+e(a,r,l,d,p,h,g)),$("#spanResultPrint").children("a").attr("href",o+e("",r,l,d,p,"","")),$(document).ajaxComplete(function(n,m,w){w.url.indexOf(i)>-1&&(c(),u(),s(),i=t.children("div.box-wrapper").attr("data-path"),o=t.children("div.box-wrapper").attr("data-print"),a=t.children("div.box-wrapper").attr("data-term"),r=t.children("div.box-wrapper").attr("data-sector"),l=t.children("div.box-wrapper").attr("data-category"),d=t.children("div.box-wrapper").attr("data-activity"),p=t.children("div.box-wrapper").attr("data-subactivity"),h=Number(t.children("div.box-wrapper").attr("data-page")),f=t.children("div.box-wrapper").attr("data-total"),v=t.children("div.box-wrapper").attr("data-hit"),g=t.children("div.box-wrapper").attr("data-count"),b=t.children("div.box-wrapper").attr("data-url"),window.history.replaceState(null,"Result",b+e(a,r,l,d,p,h,g)),$("#divResultHit").children("p").children("b").text(v),$("#spanResultPrint").children("a").attr("href",o+e("",r,l,d,p,"","")))}),t.on("click","a.FilterSector",function(){r=$(this).text(),t.load(i+e(a,r,"","","","",g)),n("sector",r)}).on("click","a.FilterCategory",function(){l=$(this).text(),t.load(i+e(a,"",l,"","","",g)),n("category",l)}).on("click","a.FilterActivity",function(){d=$(this).text(),t.load(i+e(a,r,l,d,"","",g)),n("activity",d)}).on("click","a.FilterSubactivity",function(){p=$(this).text(),t.load(i+e(a,r,l,d,p,"",g)),n("subactivity",p)}).on("click","button.RemoveSector",function(){t.load(i+e(a,"","","","","",g))}).on("click","button.RemoveCategory",function(){t.load(i+e(a,r,"","","","",g))}).on("click","button.RemoveActivity",function(){t.load(i+e(a,r,l,"","","",g))}).on("click","button.RemoveSubactivity",function(){t.load(i+e(a,r,l,d,"","",g))}).on("click","button.remove-all-btn",function(){t.load(i+e(a,"","","","","",g))}),t.on("click","a.page-link",function(){var n=0;n=$(this).hasClass("fa-chevron-left")?h-1:$(this).hasClass("fa-chevron-right")?h+1:"..."!=$(this).text()?Number($(this).text()):h,f-n>=0&&n>0&&n!=h&&t.load(i+e(a,r,l,d,p,n,g),function(){window.location.hash="#divContent"})}).on("click","input.PageSubmit",function(){var n=Number($("input.PageText").val());f-n>=0&&n>0&&n!=h&&t.load(i+e(a,r,l,d,p,n,g))}),$("#ddlResultCount").change(function(){g=$(this).val(),t.fadeOut(),t.load(i+e(a,r,l,d,p,"",g),function(){t.fadeIn()})})}},m=function(){var t=$("#txtSearch"),e=$("div.dropdown-wrap"),n=e.attr("data-path");t.keyup(function(){if(t.val().length>3){var i=t.val();e.load(n+"?term="+encodeURIComponent(i),function(){$("div.result-box").length?e.addClass("opened"):e.removeClass("opened")})}else e.removeClass("opened")})},w=function(){var t=$("#txtSearchExternal");$("button.ic-search").click(function(){var e=t.val();console.log(e),e.length>0&&(window.location.href="http://www.mas.gov.sg/Search?q="+encodeURIComponent(e))})},x=function(){var t=$(".sub-category-list li").length;if(t>9){$("button.load-more").css({display:"block"});for(var e=t;e>8;e--)$(".sub-category-list li").eq(e).hide();$("button.load-more").click(function(){for(var e=t;e>8;e--)$(".sub-category-list li").eq(e).show();$("button.load-more").css({display:"none"})})}else $("button.load-more").css({display:"none"})},y=function(){var t={lines:13,length:10,width:2,radius:9,corners:1,rotate:0,direction:1,color:"#000",speed:2,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"100",left:"auto"},e=document.getElementById("full-page-loading"),n=document.getElementById("component-loading");new Spinner(t).spin(e),new Spinner(t).spin(n)},C=function(){var t=0;$(".version .button input").length&&$(".version .button input").change(function(){this.checked?++t<=2&&(t>1&&$(".box-compare .buttons .compare-buttons").append("<p class='plus-sign'>+</p>"),$(".box-compare .buttons .compare-buttons").append("<button class='compare-btn'>"+$(this)[0].value+"</button>"),$(this).next("label").text("remove")):($(".box-compare .buttons .compare-buttons button.compare-btn:contains('"+$(this)[0].value+"')").remove(),$(this).next("label").text("Add to Compare"),$(".plus-sign").length&&$(".plus-sign").remove(),t--),2==t?$("input:checkbox:not(:checked)").prop({disabled:!0}):$("input:checkbox").prop({disabled:!1})})},k=function(){if($(".left").length)new AceDiff({mode:"ace/mode/javascript",left:{id:"left"},right:{id:"right"}})}};